# Phase A: Architecture Vision

**Проект:** Meetup Reservation (монорепозиторий)  
**Методология:** TOGAF ADM  
**Версия:** 1.0

---

## 1. Цель и ценность (Architecture Vision)

### 1.1 Видение

Meetup Reservation — веб-платформа для организации, регистрации и управления мероприятиями (конференции, вебинары, мастер-классы, концерты). Система работает по аналогии с Eventbrite или TimePad в мини-формате: организаторы публикуют события, посетители регистрируются и оплачивают билеты, получая доступ и подтверждение.

### 1.2 Цели

- **Упростить организацию событий** — единый инструмент для создания, публикации и управления мероприятиями.
- **Автоматизировать процессы** — регистрация, оплата, рассылки, чек-ин и отчётность без ручной работы.
- **Обеспечить прозрачность** — понятный процесс для организаторов и удобный опыт для посетителей.

### 1.3 Ценность для бизнеса

| Ценность | Описание |
|---------|----------|
| Снижение операционных затрат | Автоматизация рассылок, учёта участников и отчётов |
| Увеличение конверсии | Удобная регистрация и оплата повышают число участников |
| Контроль посещаемости | Ручная отметка участников (QR — в следующих фазах), ограничение мест, экспорт данных |
| Масштабируемость | Поддержка онлайн и офлайн-событий различного масштаба |

---

## 2. Заинтересованные стороны (Stakeholders)

### 2.1 Модель пользователей

- **Мультитенантность:** множество организаторов; каждый организатор создаёт и управляет своими событиями.
- **Организатор:** регистрация и авторизация обязательны.
- **Посетитель (участник):**
  - может зарегистрироваться на платформе — тогда при регистрации на мероприятие данные (Фамилия, Имя, Отчество, email, телефон) подставляются автоматически; у зарегистрированного участника есть личный кабинет («Мои регистрации»);
  - может участвовать без регистрации на платформе — вводит данные при каждой регистрации на мероприятие (гостевая регистрация).
- **Администратор платформы:** отдельная роль с правами модерации и управления пользователями; авторизация обязательна. Первый администратор создаётся через SQL-скрипт в `src/backend/db/`.

| Stakeholder | Роль | Интересы и цели |
|-------------|------|------------------|
| **Организатор** | Создатель и владелец события | Создание событий, управление участниками, контроль заполняемости, отчёты, возвраты |
| **Посетитель** | Участник мероприятия | Поиск событий, регистрация, оплата, получение подтверждения (QR-код — в следующих фазах) |
| **Администратор платформы** | Оператор системы | Модерация событий и организаторов (постмодерация, блокировка, разблокировка); управление пользователями (просмотр, блокировка, разблокировка); управление категориями |
| **Команда разработки** | Реализация и поддержка | Чёткие технологические ограничения, поддерживаемый стек |

### Ключевые concerns (беспокойства)

- **Организатор:** прозрачность регистраций, надёжность уведомлений, простота экспорта данных.
- **Посетитель:** удобство регистрации, безопасность оплаты, доступность подтверждений.
- **Бизнес:** соответствие технологическому стеку, возможность развития функциональности.

---

## 3. Область (Scope)

### 3.1 В рамках области (In Scope)

- **Backend:** ASP.NET Core (.NET 10), PostgreSQL, схема БД через SQL-скрипты (без Entity Framework).
- **Frontend:** React + TypeScript + Vite.
- **Функциональность:**
  - Мультитенантная модель: множество организаторов, изоляция данных по организаторам.
  - Регистрация и авторизация организаторов; опциональная регистрация посетителей на платформе с личным кабинетом («Мои регистрации»).
  - Создание и публикация событий.
  - Каталог событий: единый каталог (фильтрация по категориям, сортировка; полнотекстовый поиск — в следующих фазах) и страницы организаторов (события конкретного организатора; публичный профиль организатора: название, описание, аватар). Неавторизованный посетитель видит публичный каталог, может перейти к регистрации на мероприятие, войти в систему или зарегистрироваться на платформе. Приватные события — доступ по ссылке.
  - Регистрация и оплата посетителей.
  - Управление участниками, чек-ин, отмена/возврат.
  - Администрирование: модерация событий и организаторов (постмодерация, блокировка, разблокировка); управление пользователями (просмотр, блокировка, разблокировка).
  - Уведомления: в первой версии — только email; SMS — в следующих фазах. Ограничение мест, экспорт списка участников в Excel/PDF.

### 3.2 Вне области (Out of Scope) / Следующие фазы

- Интеграция с внешними платёжными системами (Stripe, ЮKassa и т.п.) — планируется в следующих фазах.
- Интеграция с SMS-провайдерами — планируется в следующих фазах.
- Интеграция с видеоплатформами (Zoom, Meet и т.п.) — не в scope; для онлайн-событий достаточно указания «онлайн» в описании/месте проведения.
- Чек-ин по QR-коду — планируется в следующих фазах (в первой версии — ручная отметка участников).
- Мобильные нативные приложения.
- Использование Entity Framework и иных ORM.
- Другие стеки (например, Node.js backend, Vue/Angular frontend).
- Публичный API для внешних интеграций — не в первой версии.
- Полнотекстовый поиск по каталогу — в следующих фазах (в первой версии только фильтрация по категориям).
- Мультиязычность — в следующих фазах.
- Восстановление пароля — в следующих фазах.
- Подтверждение email при регистрации — в следующих фазах.

**Сводка: запланировано на следующие фазы** — реальные платежи и возвраты; SMS-уведомления; чек-ин по QR-коду; интеграция с видеоплатформами (при необходимости); восстановление пароля; подтверждение email; клонирование событий; мультиязычность; список ожидания (waitlist); промокоды и скидки; несколько билетов на одно событие (для одного участника).

### 3.3 Границы архитектуры

- Монорепозиторий: backend и frontend в одном репозитории; структура `src/backend/`, `src/frontend/`; SQL-скрипты в `src/backend/db/`.
- Схема БД управляется SQL-скриптами, миграции — только ручные. Создание первого администратора — SQL-скрипт в `src/backend/db/`.
- **Развёртывание и хостинг:** пока не определено (self-hosted / cloud / SaaS — решение в последующих фазах).

---

## 4. Принципы (Principles)

### 4.1 Бизнес-принципы

| ID | Принцип | Обоснование |
|----|---------|-------------|
| BP-1 | Прозрачность для организаторов | Организатор должен видеть полную картину по регистрациям и посещаемости |
| BP-2 | Удобство для посетителей | Регистрация и оплата должны быть простыми и быстрыми |
| BP-3 | Автоматизация рутинных операций | Рассылки, напоминания и ограничение мест выполняются системой |

### 4.2 Архитектурные принципы

| ID | Принцип | Обоснование |
|----|---------|-------------|
| AP-1 | Backend на ASP.NET Core (.NET 10) | Соответствие корпоративному технологическому стеку |
| AP-2 | PostgreSQL как СУБД | Надёжность, открытость, поддержка транзакций |
| AP-3 | Схема БД через SQL-скрипты, без ORM | Полный контроль над схемой и миграциями |
| AP-4 | Frontend на React + TypeScript + Vite | Современный стек, типизация, быстрая сборка |
| AP-5 | Монорепозиторий | Единая точка истины, упрощение CI/CD |

### 4.3 Технологические ограничения

- **Backend:** ASP.NET Core (.NET 10), PostgreSQL, SQL-скрипты. Entity Framework не используется.
- **Frontend:** React, TypeScript, Vite.

---

## 5. Высокоуровневые требования (High-Level Requirements)

### 5.1 Функциональные требования

#### Создание события (Организатор)

- Добавление названия, описания, даты/времени, места (онлайн/офлайн; для онлайн — ссылка на трансляцию при необходимости указывается в описании), категорий из фиксированного списка платформы (обязательно, можно выбрать несколько: конференции, вебинары, концерты и т.п.).
- Публичность: публичное (в каталоге) или приватное/пригласительное (доступ по ссылке). Приглашения — организатор вручную рассылает ссылку (вне системы).
- Несколько типов билетов на одно событие (например: VIP, стандарт, early bird) — каждый со своей ценой, вместимостью и лимитами.
- Загрузка фото и программы мероприятия.
- Редактирование после публикации не предусмотрено; клонирование события — не в первой версии; при необходимости — создание нового события с нуля.
- Отмена события: организатор может отменить опубликованное событие; участники получают уведомление, регистрации аннулируются. Удаление события не предусмотрено — только отмена. Отменённые события скрыты из каталога (не показываются в поиске и фильтрах), но доступны по прямой ссылке с пометкой «отменено». Заблокированные администратором — аналогично (скрыты, доступны по ссылке). Прошедшие события видны в каталоге с пометкой «завершено».

#### Регистрация и авторизация

- Регистрация и авторизация организаторов (обязательно); публичный профиль организатора (название, описание, аватар). Подтверждение email и восстановление пароля — не в первой версии.
- Регистрация посетителей на платформе (опционально) — для последующего автозаполнения данных при регистрации на мероприятия.

#### Регистрация посетителей на мероприятие

- Поиск и выбор событий: через единый каталог или страницу организатора; фильтрация по категориям (фиксированный список).
- Личный кабинет участника: просмотр «Мои регистрации», отмена своей регистрации (с уведомлением организатора). Гость (без учётной записи) не может отменить регистрацию в первой версии.
- Выбор типа билета; ввод данных (Фамилия, Имя, Отчество, email, телефон) — для гостей или при первом участии; автозаполнение — для зарегистрированных пользователей. Один участник — один билет на событие (несколько билетов на одно событие — не в первой версии). Запрет дублирования: один email — один билет на событие.
- Оплата: для платных билетов — в первой версии заглушка/симуляция (реальные платежи — в следующих фазах); для бесплатных билетов шаг оплаты пропускается, регистрация завершается сразу после ввода данных. Промокоды и скидки — не в первой версии.
- Получение подтверждения регистрации (QR-код — в следующих фазах).

#### Управление (Организатор)

- Список участников; отмена события с уведомлением участников.
- Чек-ин: в первой версии — ручная отметка участников организатором; чек-ин по QR-коду — в следующих фазах.
- Отмена регистрации: организатор может отменить любую регистрацию; зарегистрированный участник — свою (с уведомлением организатора); гость не может отменить в первой версии. Возврат средств — в первой версии только логическая отмена (реальные возвраты — в следующих фазах).
- Экспорт данных в Excel/PDF: список участников события (Фамилия, Имя, Отчество, email, телефон, статус чек-ина и т.п.).

#### Администрирование платформы

- Модерация событий и организаторов: постмодерация (события публикуются сразу, администратор может заблокировать позже); блокировка организаторов — при блокировке все события организатора отменяются, участники получают уведомление по email.
- Управление пользователями: просмотр, блокировка.
- Управление категориями: добавление, редактирование, пометка архивной (в новых событиях недоступна).


#### Автоматизация

- Уведомления по email (подтверждение регистрации, напоминания за день/час); SMS — в следующих фазах.
- Ограничение по местам: закрытие регистрации при заполнении; лимиты задаются по каждому типу билета. Список ожидания (waitlist) — не в первой версии.

### 5.2 Нефункциональные требования (high-level)

| Категория | Требование |
|-----------|------------|
| Производительность | Система должна выдерживать типичную нагрузку регистраций на мероприятия |
| Безопасность | Защита персональных данных и платёжной информации |
| Доступность | Веб-интерфейс доступен с основных браузеров |
| Локализация | Только русский язык в первой версии |
| Поддерживаемость | Код в монорепозитории, чёткое разделение backend/frontend |

---

## 6. Утверждение (Approval)

| Роль | Статус | Дата |
|------|--------|------|
| Владелец продукта | Ожидает | — |
| Архитектор | Ожидает | — |
| Технический лидер | Ожидает | — |

---

*Документ подготовлен на основе [basic-requirements.md](./basic-requirements.md) в формате TOGAF Phase A (Architecture Vision). Следующие этапы: [Phase B: Business Architecture](./phase-b-business-architecture.md) → [Phase C: Information Systems Architectures](./phase-c-information-systems-architecture.md) → [Phase D: Technology Architecture](./phase-d-technology-architecture.md).*
